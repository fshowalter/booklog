:ruby
  excerpt_for_review = lambda do |review|
    grade = grade_to_image_tag(
      grade: review.grade,
      options: {
        class: 'home_review_list-grade',
        width: '95px',
        height: '19px'
      }
    )

    first_paragraph(grade + ' ' + review.content)
  end

%ol.home_review_list
  - reviews.each do |review|
    - book = Booklog.books[review.book_id]
    %li.home_review_list-item
      %article.home_review_list-review
        .home_review_list-date_wrap
          .home_review_list-date
            = review.date.strftime('%d %b %Y')
        %header.home_review_list-header
          %h3.home_review_list-title
            %a.home_review_list-header_link{ href: href_for_review(review) }
              #{book.title} <span class="home_review_list-title_author">by #{book.authors.map(&:name).to_sentence}</span>
        %a.home_review_list-cover_wrap{ href: href_for_review(review) }
          .home_review_list-cover{ data: { cover: book.cover } }
            %img.home_review_list-cover_placeholder{ src: book.cover_placeholder }
            %noscript
              %img.cover-noscript{ src: book.cover }
        .home_review_list-excerpt
          = excerpt_for_review.call(review)

