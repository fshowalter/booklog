:ruby

  slug_for_reading = lambda do |reading|
    status = 'Read '

    if reading.pages_read != reading.pages_total
      status = "Abandoned after #{reading.pages_read} of #{reading.pages_total} pages"
    end

    dates = "#{reading.date_started.strftime("%b %d, %Y")} to #{reading.date_finished.strftime("%b %d, %Y")}"

    # if reading.date_started.year == reading.date_finished.year &&
    #  reading.date_started.month == reading.date_started.month
    #  dates = "#{reading.date_started.strftime("%b %d")} to #{reading.date_finished.strftime("%d, %Y")}"
    # end

    dates
  end

%ol.readings_list#readings
  - readings.reverse.each do |reading|
    - review = Booklog.reviews[reading.book_id]
    %li.readings_list-item{ data_for_reading(reading: reading) }
      .readings_list-item_title
        - if review
          %a{ href: href_for_review(review) }
            = reading.title
            %span.readings_list-item_author
              = " by #{reading.authors.map(&:name).to_sentence}"
        - else
          = reading.title_with_author
      .readings_list-item_slug
        %span.readings_list-item_pages
          pp. #{reading.pages_read}/#{reading.pages_total}
        %span.readings_list-item_divider
          =" | "
        = slug_for_reading.call(reading)

