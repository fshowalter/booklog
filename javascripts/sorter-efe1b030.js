(function(){"use strict";var t,e;t=function(){function t(e,n){this.$element=$(e),this.options=$.extend({},t.DEFAULTS,n),this.$target=$(this.options.target),this.dataMap=t.mapItems(this.$target.find(this.options.itemsSelector))}return t.DEFAULTS={itemsSelector:"li"},t.descendingSort=function(e,n){return-1*t.ascendingSort(e,n)},t.ascendingSort=function(t,e){return"string"==typeof t?t.value.localeCompare(e.value):t.value===e.value?0:t.value>e.value?1:-1},t.removeElementToInsertLater=function(t){var e,n;return n=t.parentNode,e=t.nextSibling,n.removeChild(t),function(){return e?n.insertBefore(t,e):n.appendChild(t)}},t.mapItems=function(t){var e,n,r,i,a,o,s,l;for(a=[],s=0,l=t.length;l>s;s++){r=t[s],e=$(r),n=e.data();for(i in n)o=n[i],null==a[i]&&(a[i]=[]),a[i].push({item:r,value:o})}return a},t.prototype.sort=function(){var e,n,r,i,a,o,s,l,u,c;for(s=this.$element.val(),n=this.$target[0],r=t.removeElementToInsertLater(n),this.$target.empty(),c=/(.*)-(asc|desc)$/.exec(s).slice(1,3),e=c[0],i=c[1],o=this.dataMap[jQuery.camelCase(e)].sort("desc"===i?t.descendingSort:t.ascendingSort),l=0,u=o.length;u>l;l++)a=o[l],n.appendChild(a.item);return r()},t}(),e=$.fn.sorter,$.fn.sorter=function(e){return this.each(function(){var n,r,i;return n=$(this),r=n.data("movielog.sorter"),i=$.extend({},t.DEFAULTS,n.data(),"object"==typeof e&&e),r||n.data("movielog.sorter",r=new t(this,i)),"string"==typeof e?r[e]():void 0})},$.fn.sorter.Constructor=t,$.fn.sorter.noConflict=function(){return $.fn.sorter=e,this},$(document).on("change.movielog.sort","[data-sorter]",function(){return $(this).sorter("sort")})}).call(this);